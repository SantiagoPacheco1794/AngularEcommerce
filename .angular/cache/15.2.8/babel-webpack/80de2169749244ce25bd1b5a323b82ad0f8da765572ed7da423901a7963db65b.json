{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/cart.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../payment-modal/payment-modal.component\";\nfunction CarritoComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"img\", 9);\n    i0.ɵɵelementStart(2, \"div\", 10)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"label\", 12);\n    i0.ɵɵtext(7, \"Cantidad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function CarritoComponent_div_5_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(item_r3.quantity = $event);\n    })(\"change\", function CarritoComponent_div_5_Template_input_change_8_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.updateCartSummary());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 14);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 15);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 16)(15, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CarritoComponent_div_5_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.removeFromCart(item_r3.product.id));\n    });\n    i0.ɵɵtext(16, \"Eliminar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CarritoComponent_div_5_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.saveForLater(item_r3));\n    });\n    i0.ɵɵtext(18, \"Guardar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", item_r3.product.title);\n    i0.ɵɵproperty(\"src\", item_r3.product.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r3.product.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", item_r3.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Actual: \", item_r3.product.initial_quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(13, 6, item_r3.product.price, \"1.2-2\", \"es-AR\"));\n  }\n}\nfunction CarritoComponent_app_payment_modal_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-payment-modal\", 17);\n    i0.ɵɵlistener(\"close\", function CarritoComponent_app_payment_modal_19_Template_app_payment_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.closePaymentModal());\n    })(\"payConfirmed\", function CarritoComponent_app_payment_modal_19_Template_app_payment_modal_payConfirmed_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.completePurchase());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarritoComponent_div_20_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"img\", 9);\n    i0.ɵɵelementStart(2, \"div\", 21)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11)(6, \"label\");\n    i0.ɵɵtext(7, \"Guardado\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 16)(9, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CarritoComponent_div_20_div_3_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const savedItem_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.addToCartFromSaved(savedItem_r13));\n    });\n    i0.ɵɵtext(10, \"Agregar al carrito\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CarritoComponent_div_20_div_3_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const savedItem_r13 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.removeFromSaved(savedItem_r13.product.id));\n    });\n    i0.ɵɵtext(12, \"Eliminar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const savedItem_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", savedItem_r13.product.title);\n    i0.ɵɵproperty(\"src\", savedItem_r13.product.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(savedItem_r13.product.title);\n  }\n}\nfunction CarritoComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"h2\");\n    i0.ɵɵtext(2, \"Productos Guardados\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CarritoComponent_div_20_div_3_Template, 13, 3, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.savedItems);\n  }\n}\nexport class CarritoComponent {\n  constructor(cartService) {\n    this.cartService = cartService;\n    this.cartItems = [];\n    this.savedItems = [];\n    this.cartSummary = {\n      numberOfProducts: 0,\n      totalPrice: 0\n    };\n    this.shippingCost = 0;\n    this.totalAmount = 0;\n    this.isModalOpen = false;\n  }\n  ngOnInit() {\n    this.cartItems = this.cartService.getCart();\n    this.savedItems = this.cartService.getSavedItems();\n    this.updateCartSummary();\n  }\n  updateCartSummary() {\n    const {\n      numberOfProducts,\n      totalPrice\n    } = this.cartService.getCartSummary();\n    this.cartSummary = {\n      numberOfProducts,\n      totalPrice\n    };\n    this.shippingCost = this.generateRandomShippingCost();\n    this.totalAmount = totalPrice + this.shippingCost;\n  }\n  generateRandomShippingCost() {\n    return Math.floor(Math.random() * (5000 - 2000 + 1)) + 2000; // Random number between 2000 and 5000\n  }\n\n  removeFromCart(productId) {\n    this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n    this.cartService.updateCart(this.cartItems); // Ensure the service updates the cart\n    this.updateCartSummary();\n  }\n  saveForLater(item) {\n    this.cartService.saveItem(item); // Only call the service to handle saving\n    this.removeFromCart(item.product.id); // Remove the item from the cart after saving it\n    this.savedItems = this.cartService.getSavedItems(); // Refresh saved items from the service\n  }\n\n  addToCartFromSaved(item) {\n    this.cartService.addToCart(item.product, item.quantity);\n    this.removeFromSaved(item.product.id);\n    this.cartItems = this.cartService.getCart();\n    this.updateCartSummary();\n  }\n  removeFromSaved(productId) {\n    this.savedItems = this.savedItems.filter(item => item.product.id !== productId);\n    this.cartService.updateSavedItems(this.savedItems);\n  }\n  openPaymentModal() {\n    this.isModalOpen = true;\n  }\n  closePaymentModal() {\n    this.isModalOpen = false;\n  }\n  completePurchase() {\n    this.cartItems.forEach(item => {\n      // Assuming the cartService has a method to update the product quantity\n      this.cartService.updateProductQuantity(item.product.id, item.product.initial_quantity - item.quantity);\n    });\n    alert('Compra realizada con éxito!');\n    this.cartService.updateCart([]); // Clear the cart\n    this.closePaymentModal();\n    this.ngOnInit(); // Refresh cart data\n  }\n}\n\nCarritoComponent.ɵfac = function CarritoComponent_Factory(t) {\n  return new (t || CarritoComponent)(i0.ɵɵdirectiveInject(i1.CartService));\n};\nCarritoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CarritoComponent,\n  selectors: [[\"app-carrito\"]],\n  decls: 21,\n  vars: 14,\n  consts: [[1, \"outer-container\"], [1, \"layout-container\"], [1, \"product-list-container\"], [\"class\", \"product-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-summary\"], [1, \"link\", 3, \"click\"], [3, \"close\", \"payConfirmed\", 4, \"ngIf\"], [\"class\", \"saved-items-container\", 4, \"ngIf\"], [1, \"product-card\"], [1, \"thumbnail\", 3, \"src\", \"alt\"], [1, \"product-info\"], [1, \"quantity-container\"], [\"for\", \"quantity\"], [\"type\", \"number\", \"min\", \"1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"current-quantity\"], [1, \"price\"], [1, \"item-cart__actions\"], [3, \"close\", \"payConfirmed\"], [1, \"saved-items-container\"], [\"class\", \"saved-product-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"saved-product-card\"], [1, \"saved-product-info\"]],\n  template: function CarritoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n      i0.ɵɵtext(4, \"Lista de Productos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, CarritoComponent_div_5_Template, 19, 10, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"h2\");\n      i0.ɵɵtext(8, \"Resumen de Compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"p\");\n      i0.ɵɵtext(10);\n      i0.ɵɵpipe(11, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"p\");\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"p\");\n      i0.ɵɵtext(15);\n      i0.ɵɵpipe(16, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function CarritoComponent_Template_button_click_17_listener() {\n        return ctx.openPaymentModal();\n      });\n      i0.ɵɵtext(18, \"Comprar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(19, CarritoComponent_app_payment_modal_19_Template, 1, 0, \"app-payment-modal\", 6);\n      i0.ɵɵtemplate(20, CarritoComponent_div_20_Template, 4, 1, \"div\", 7);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cartItems);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"Productos: $\", i0.ɵɵpipeBind3(11, 6, ctx.cartSummary.totalPrice, \"1.2-2\", \"es-AR\"), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Env\\u00EDo: $\", ctx.shippingCost, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Total (con Env\\u00EDo): $\", i0.ɵɵpipeBind3(16, 10, ctx.totalAmount, \"1.2-2\", \"es-AR\"), \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isModalOpen);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.savedItems.length > 0);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.MinValidator, i3.NgModel, i4.PaymentModalComponent, i2.DecimalPipe],\n  styles: [\".outer-container[_ngcontent-%COMP%] {\\r\\n  background-color: rgba(0, 0, 0, 0.1);\\r\\n  padding: 20px;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n\\r\\n.layout-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  gap: 20px;\\r\\n  width: 100%;\\r\\n  max-width: 1200px;\\r\\n  margin: 0 auto;\\r\\n}\\r\\n\\r\\n\\r\\n.product-list-container[_ngcontent-%COMP%] {\\r\\n  flex: 2;\\r\\n  background-color: #fff;\\r\\n  padding: 20px;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\r\\n  max-height: 600px; \\r\\n  overflow-y: auto;\\r\\n}\\r\\n\\r\\n.product-card[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: 15px;\\r\\n  border-bottom: 1px solid #ddd;\\r\\n  padding-bottom: 10px;\\r\\n}\\r\\n\\r\\n.thumbnail[_ngcontent-%COMP%] {\\r\\n  width: 80px; \\r\\n  height: auto;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.product-info[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n}\\r\\n\\r\\n.quantity-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-top: 10px;\\r\\n}\\r\\n\\r\\n.quantity-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n  width: 80px; \\r\\n  padding: 5px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 4px;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.current-quantity[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n  margin-left: 10px;\\r\\n}\\r\\n\\r\\n.price[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n  margin-top: 10px;\\r\\n}\\r\\n\\r\\n.item-cart__actions[_ngcontent-%COMP%] {\\r\\n  margin-top: 10px;\\r\\n}\\r\\n\\r\\n.item-cart__actions[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] {\\r\\n  background-color: #2968c8;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n  margin-right: 5px;\\r\\n}\\r\\n\\r\\n.item-cart__actions[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #1e57a2;\\r\\n}\\r\\n\\r\\n\\r\\n.cart-summary[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  background-color: #f8f8f8;\\r\\n  padding: 20px;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n.cart-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n\\r\\n.saved-items-container[_ngcontent-%COMP%] {\\r\\n  background-color: #fff;\\r\\n  padding: 20px;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\r\\n  margin-top: 20px;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.saved-product-card[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: 15px;\\r\\n  border-bottom: 1px solid #ddd;\\r\\n  padding-bottom: 10px;\\r\\n}\\r\\n\\r\\n.saved-product-info[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n}\\r\\n\\r\\n.buy-button[_ngcontent-%COMP%]{\\r\\n  background-color: #2968c8;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n  margin-right: 5px;\\r\\n}\\r\\n\\r\\n.cancel-button[_ngcontent-%COMP%]{\\r\\n  background-color: #EF2D56; \\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n  margin-right: 5px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2Fycml0by9jYXJyaXRvLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUNBQXlDO0FBQ3pDO0VBQ0Usb0NBQW9DO0VBQ3BDLGFBQWE7RUFDYixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtBQUNyQjs7QUFFQSxrREFBa0Q7QUFDbEQ7RUFDRSxhQUFhO0VBQ2IsU0FBUztFQUNULFdBQVc7RUFDWCxpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQSxrQ0FBa0M7QUFDbEM7RUFDRSxPQUFPO0VBQ1Asc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsd0NBQXdDO0VBQ3hDLGlCQUFpQixFQUFFLHFCQUFxQjtFQUN4QyxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQiw2QkFBNkI7RUFDN0Isb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsV0FBVyxFQUFFLG9DQUFvQztFQUNqRCxZQUFZO0VBQ1osa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsT0FBTztBQUNUOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxXQUFXLEVBQUUsMkJBQTJCO0VBQ3hDLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBLGtDQUFrQztBQUNsQztFQUNFLE9BQU87RUFDUCx5QkFBeUI7RUFDekIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQix3Q0FBd0M7QUFDMUM7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUEsaUNBQWlDO0FBQ2pDO0VBQ0Usc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsd0NBQXdDO0VBQ3hDLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQiw2QkFBNkI7RUFDN0Isb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsT0FBTztBQUNUOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UseUJBQXlCLEVBQUUsMEJBQTBCO0VBQ3JELFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0FBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLyogT3V0ZXIgQ29udGFpbmVyIHdpdGggR3JleSBCYWNrZ3JvdW5kICovXHJcbi5vdXRlci1jb250YWluZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4vKiBMYXlvdXQgQ29udGFpbmVyIGZvciBQcm9kdWN0IExpc3QgYW5kIFN1bW1hcnkgKi9cclxuLmxheW91dC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiAyMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1heC13aWR0aDogMTIwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG59XHJcblxyXG4vKiBQcm9kdWN0IExpc3QgQ29udGFpbmVyIFN0eWxlcyAqL1xyXG4ucHJvZHVjdC1saXN0LWNvbnRhaW5lciB7XHJcbiAgZmxleDogMjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgbWF4LWhlaWdodDogNjAwcHg7IC8qIEFkanVzdCBhcyBuZWVkZWQgKi9cclxuICBvdmVyZmxvdy15OiBhdXRvO1xyXG59XHJcblxyXG4ucHJvZHVjdC1jYXJkIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcclxuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLnRodW1ibmFpbCB7XHJcbiAgd2lkdGg6IDgwcHg7IC8qIEFkanVzdCBzaXplIG9mIHRodW1ibmFpbCBpbWFnZXMgKi9cclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4ucHJvZHVjdC1pbmZvIHtcclxuICBmbGV4OiAxO1xyXG59XHJcblxyXG4ucXVhbnRpdHktY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG5cclxuLnF1YW50aXR5LWNvbnRhaW5lciBpbnB1dCB7XHJcbiAgd2lkdGg6IDgwcHg7IC8qIEFkanVzdCB3aWR0aCBhcyBuZWVkZWQgKi9cclxuICBwYWRkaW5nOiA1cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4uY3VycmVudC1xdWFudGl0eSB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuXHJcbi5wcmljZSB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG5cclxuLml0ZW0tY2FydF9fYWN0aW9ucyB7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG5cclxuLml0ZW0tY2FydF9fYWN0aW9ucyAubGluayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzI5NjhjODtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbi5pdGVtLWNhcnRfX2FjdGlvbnMgLmxpbms6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTU3YTI7XHJcbn1cclxuXHJcbi8qIENhcnQgU3VtbWFyeSBDb250YWluZXIgU3R5bGVzICovXHJcbi5jYXJ0LXN1bW1hcnkge1xyXG4gIGZsZXg6IDE7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcblxyXG4uY2FydC1zdW1tYXJ5IGgyIHtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG4vKiBTYXZlZCBJdGVtcyBDb250YWluZXIgU3R5bGVzICovXHJcbi5zYXZlZC1pdGVtcy1jb250YWluZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uc2F2ZWQtcHJvZHVjdC1jYXJkIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcclxuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLnNhdmVkLXByb2R1Y3QtaW5mbyB7XHJcbiAgZmxleDogMTtcclxufVxyXG5cclxuLmJ1eS1idXR0b257XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzI5NjhjODtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbi5jYW5jZWwtYnV0dG9ue1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNFRjJENTY7IC8qIExpZ2h0IGdyZXkgYmFja2dyb3VuZCAqL1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogOHB4IDEycHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;IAKMA,8BAAyD;IACvDA,yBAAuF;IACvFA,+BAA0B;IACpBA,YAAwB;IAAAA,iBAAK;IACjCA,+BAAgC;IACRA,yBAAS;IAAAA,iBAAQ;IACvCA,iCAA0F;IAArEA;MAAA;MAAA;MAAA,OAAaA,yCAAqB;IAAA,EAAP;MAAAA;MAAA;MAAA,OAAmBA,yCAAmB;IAAA,EAAtC;IAAhDA,iBAA0F;IAC1FA,+BAA8B;IAAAA,aAA2C;IAAAA,iBAAM;IAEjFA,gCAAmB;IAAAA,aAAiD;;IAAAA,iBAAM;IAC1EA,gCAAgC;IACtBA;MAAA;MAAA;MAAA;MAAA,OAASA,wDAA+B;IAAA,EAAC;IAAcA,yBAAQ;IAAAA,iBAAS;IAChFA,kCAAkD;IAA1CA;MAAA;MAAA;MAAA;MAAA,OAASA,2CAAkB;IAAA,EAAC;IAAcA,wBAAO;IAAAA,iBAAS;;;;IAXlCA,eAA8B;IAA9BA,sDAA8B;IAA7DA,iEAA8B;IAE7BA,eAAwB;IAAxBA,2CAAwB;IAGLA,eAA2B;IAA3BA,0CAA2B;IAClBA,eAA2C;IAA3CA,uEAA2C;IAExDA,eAAiD;IAAjDA,oFAAiD;;;;;;IAoB9EA,6CAEuD;IADpCA;MAAAA;MAAA;MAAA,OAASA,yCAAmB;IAAA,EAAC;MAAAA;MAAA;MAAA,OACbA,yCAAkB;IAAA,EADL;IACOA,iBAAoB;;;;;;IAKvEA,+BAAqE;IACnEA,yBAAiG;IACjGA,+BAAgC;IAC1BA,YAA6B;IAAAA,iBAAK;IACtCA,+BAAgC;IACvBA,wBAAQ;IAAAA,iBAAQ;IAEzBA,+BAAgC;IACtBA;MAAA;MAAA;MAAA;MAAA,OAASA,wDAA6B;IAAA,EAAC;IAAcA,mCAAkB;IAAAA,iBAAS;IACxFA,kCAAqE;IAA7DA;MAAA;MAAA;MAAA;MAAA,OAASA,gEAAqC;IAAA,EAAC;IAAcA,yBAAQ;IAAAA,iBAAS;;;;IARjDA,eAAmC;IAAnCA,4DAAmC;IAAvEA,uEAAmC;IAElCA,eAA6B;IAA7BA,iDAA6B;;;;;IALvCA,+BAAiE;IAC3DA,mCAAmB;IAAAA,iBAAK;IAC5BA,0EAYM;IACRA,iBAAM;;;;IAbuBA,eAAa;IAAbA,2CAAa;;;ACjC5C,OAAM,MAAOC,gBAAgB;EAQ3BC,YAAoBC,WAAwB;IAAxB,gBAAW,GAAXA,WAAW;IAP/B,cAAS,GAAU,EAAE;IACrB,eAAU,GAAU,EAAE;IACtB,gBAAW,GAAG;MAAEC,gBAAgB,EAAE,CAAC;MAAEC,UAAU,EAAE;IAAC,CAAE;IACpD,iBAAY,GAAW,CAAC;IACxB,gBAAW,GAAW,CAAC;IACvB,gBAAW,GAAY,KAAK;EAEmB;EAE/CC,QAAQ;IACN,IAAI,CAACC,SAAS,GAAG,IAAI,CAACJ,WAAW,CAACK,OAAO,EAAE;IAC3C,IAAI,CAACC,UAAU,GAAG,IAAI,CAACN,WAAW,CAACO,aAAa,EAAE;IAClD,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAA,iBAAiB;IACf,MAAM;MAAEP,gBAAgB;MAAEC;IAAU,CAAE,GAAG,IAAI,CAACF,WAAW,CAACS,cAAc,EAAE;IAC1E,IAAI,CAACC,WAAW,GAAG;MAAET,gBAAgB;MAAEC;IAAU,CAAE;IACnD,IAAI,CAACS,YAAY,GAAG,IAAI,CAACC,0BAA0B,EAAE;IACrD,IAAI,CAACC,WAAW,GAAGX,UAAU,GAAG,IAAI,CAACS,YAAY;EACnD;EAEAC,0BAA0B;IACxB,OAAOE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;EAC/D;;EAEAC,cAAc,CAACC,SAAiB;IAC9B,IAAI,CAACd,SAAS,GAAG,IAAI,CAACA,SAAS,CAACe,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,CAACC,EAAE,KAAKJ,SAAS,CAAC;IAC7E,IAAI,CAAClB,WAAW,CAACuB,UAAU,CAAC,IAAI,CAACnB,SAAS,CAAC,CAAC,CAAC;IAC7C,IAAI,CAACI,iBAAiB,EAAE;EAC1B;EAEAgB,YAAY,CAACJ,IAAS;IACpB,IAAI,CAACpB,WAAW,CAACyB,QAAQ,CAACL,IAAI,CAAC,CAAC,CAAC;IACjC,IAAI,CAACH,cAAc,CAACG,IAAI,CAACC,OAAO,CAACC,EAAE,CAAC,CAAC,CAAC;IACtC,IAAI,CAAChB,UAAU,GAAG,IAAI,CAACN,WAAW,CAACO,aAAa,EAAE,CAAC,CAAC;EACtD;;EAEAmB,kBAAkB,CAACN,IAAS;IAC1B,IAAI,CAACpB,WAAW,CAAC2B,SAAS,CAACP,IAAI,CAACC,OAAO,EAAED,IAAI,CAACQ,QAAQ,CAAC;IACvD,IAAI,CAACC,eAAe,CAACT,IAAI,CAACC,OAAO,CAACC,EAAE,CAAC;IACrC,IAAI,CAAClB,SAAS,GAAG,IAAI,CAACJ,WAAW,CAACK,OAAO,EAAE;IAC3C,IAAI,CAACG,iBAAiB,EAAE;EAC1B;EAEAqB,eAAe,CAACX,SAAiB;IAC/B,IAAI,CAACZ,UAAU,GAAG,IAAI,CAACA,UAAU,CAACa,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,CAACC,EAAE,KAAKJ,SAAS,CAAC;IAC/E,IAAI,CAAClB,WAAW,CAAC8B,gBAAgB,CAAC,IAAI,CAACxB,UAAU,CAAC;EACpD;EAEAyB,gBAAgB;IACd,IAAI,CAACC,WAAW,GAAG,IAAI;EACzB;EAEAC,iBAAiB;IACf,IAAI,CAACD,WAAW,GAAG,KAAK;EAC1B;EAEAE,gBAAgB;IACd,IAAI,CAAC9B,SAAS,CAAC+B,OAAO,CAACf,IAAI,IAAG;MAC5B;MACA,IAAI,CAACpB,WAAW,CAACoC,qBAAqB,CAAChB,IAAI,CAACC,OAAO,CAACC,EAAE,EAAEF,IAAI,CAACC,OAAO,CAACgB,gBAAgB,GAAGjB,IAAI,CAACQ,QAAQ,CAAC;IACxG,CAAC,CAAC;IACFU,KAAK,CAAC,6BAA6B,CAAC;IACpC,IAAI,CAACtC,WAAW,CAACuB,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;IACjC,IAAI,CAACU,iBAAiB,EAAE;IACxB,IAAI,CAAC9B,QAAQ,EAAE,CAAC,CAAC;EACnB;;;AApEWL,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAyC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDR7B9C,8BAA6B;MAInBA,kCAAkB;MAAAA,iBAAK;MAC3BA,mEAeM;MACRA,iBAAM;MAGNA,8BAA0B;MACpBA,iCAAiB;MAAAA,iBAAK;MAC1BA,yBAAG;MAAAA,aAAiE;;MAAAA,iBAAI;MACxEA,0BAAG;MAAAA,aAA0B;MAAAA,iBAAI;MACjCA,0BAAG;MAAAA,aAA8D;;MAAAA,iBAAI;MACrEA,kCAAkD;MAA1CA;QAAA,OAAS+C,sBAAkB;MAAA,EAAC;MAAc/C,wBAAO;MAAAA,iBAAS;MAKxEA,+FAE2E;MAGzEA,mEAeM;MACRA,iBAAM;;;MAlDsBA,eAAY;MAAZA,uCAAY;MAqB/BA,eAAiE;MAAjEA,8GAAiE;MACjEA,eAA0B;MAA1BA,4DAA0B;MAC1BA,eAA8D;MAA9DA,iHAA8D;MAMnDA,eAAiB;MAAjBA,sCAAiB;MAK7BA,eAA2B;MAA3BA,gDAA2B","names":["i0","CarritoComponent","constructor","cartService","numberOfProducts","totalPrice","ngOnInit","cartItems","getCart","savedItems","getSavedItems","updateCartSummary","getCartSummary","cartSummary","shippingCost","generateRandomShippingCost","totalAmount","Math","floor","random","removeFromCart","productId","filter","item","product","id","updateCart","saveForLater","saveItem","addToCartFromSaved","addToCart","quantity","removeFromSaved","updateSavedItems","openPaymentModal","isModalOpen","closePaymentModal","completePurchase","forEach","updateProductQuantity","initial_quantity","alert","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Usuario\\Desktop\\Archivo\\src\\app\\carrito\\carrito.component.html","C:\\Users\\Usuario\\Desktop\\Archivo\\src\\app\\carrito\\carrito.component.ts"],"sourcesContent":["<div class=\"outer-container\">\n  <div class=\"layout-container\">\n    <!-- Product List Container -->\n    <div class=\"product-list-container\">\n      <h2>Lista de Productos</h2>\n      <div *ngFor=\"let item of cartItems\" class=\"product-card\">\n        <img [src]=\"item.product.thumbnail\" alt=\"{{ item.product.title }}\" class=\"thumbnail\" />\n        <div class=\"product-info\">\n          <h3>{{ item.product.title }}</h3>\n          <div class=\"quantity-container\">\n            <label for=\"quantity\">Cantidad:</label>\n            <input type=\"number\" [(ngModel)]=\"item.quantity\" min=\"1\" (change)=\"updateCartSummary()\" />\n            <div class=\"current-quantity\">Actual: {{ item.product.initial_quantity }}</div>\n          </div>\n          <div class=\"price\">{{ item.product.price | number:'1.2-2':'es-AR' }}</div>\n          <div class=\"item-cart__actions\">\n            <button (click)=\"removeFromCart(item.product.id)\" class=\"link\">Eliminar</button>\n            <button (click)=\"saveForLater(item)\" class=\"link\">Guardar</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Cart Summary Container -->\n    <div class=\"cart-summary\">\n      <h2>Resumen de Compra</h2>\n      <p>Productos: ${{ cartSummary.totalPrice | number:'1.2-2':'es-AR' }}</p>\n      <p>Envío: ${{ shippingCost }}</p>\n      <p>Total (con Envío): ${{ totalAmount | number:'1.2-2':'es-AR' }}</p>\n      <button (click)=\"openPaymentModal()\" class=\"link\">Comprar</button>\n    </div>\n  </div>\n\n  <!-- Payment Modal -->\n<app-payment-modal *ngIf=\"isModalOpen\"\n                   (close)=\"closePaymentModal()\"\n                   (payConfirmed)=\"completePurchase()\"></app-payment-modal>\n\n  <!-- Saved Items Section -->\n  <div *ngIf=\"savedItems.length > 0\" class=\"saved-items-container\">\n    <h2>Productos Guardados</h2>\n    <div *ngFor=\"let savedItem of savedItems\" class=\"saved-product-card\">\n      <img [src]=\"savedItem.product.thumbnail\" alt=\"{{ savedItem.product.title }}\" class=\"thumbnail\" />\n      <div class=\"saved-product-info\">\n        <h3>{{ savedItem.product.title }}</h3>\n        <div class=\"quantity-container\">\n          <label>Guardado</label>\n        </div>\n        <div class=\"item-cart__actions\">\n          <button (click)=\"addToCartFromSaved(savedItem)\" class=\"link\">Agregar al carrito</button>\n          <button (click)=\"removeFromSaved(savedItem.product.id)\" class=\"link\">Eliminar</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { CartService } from '../services/cart.service'; // Adjust the path as necessary\n\n@Component({\n  selector: 'app-carrito',\n  templateUrl: './carrito.component.html',\n  styleUrls: ['./carrito.component.css']\n})\nexport class CarritoComponent implements OnInit {\n  cartItems: any[] = [];\n  savedItems: any[] = [];\n  cartSummary = { numberOfProducts: 0, totalPrice: 0 };\n  shippingCost: number = 0;\n  totalAmount: number = 0;\n  isModalOpen: boolean = false;\n\n  constructor(private cartService: CartService) {}\n\n  ngOnInit(): void {\n    this.cartItems = this.cartService.getCart();\n    this.savedItems = this.cartService.getSavedItems();\n    this.updateCartSummary();\n  }\n\n  updateCartSummary(): void {\n    const { numberOfProducts, totalPrice } = this.cartService.getCartSummary();\n    this.cartSummary = { numberOfProducts, totalPrice };\n    this.shippingCost = this.generateRandomShippingCost();\n    this.totalAmount = totalPrice + this.shippingCost;\n  }\n\n  generateRandomShippingCost(): number {\n    return Math.floor(Math.random() * (5000 - 2000 + 1)) + 2000; // Random number between 2000 and 5000\n  }\n\n  removeFromCart(productId: number): void {\n    this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n    this.cartService.updateCart(this.cartItems); // Ensure the service updates the cart\n    this.updateCartSummary();\n  }\n\n  saveForLater(item: any): void {\n    this.cartService.saveItem(item); // Only call the service to handle saving\n    this.removeFromCart(item.product.id); // Remove the item from the cart after saving it\n    this.savedItems = this.cartService.getSavedItems(); // Refresh saved items from the service\n  }\n\n  addToCartFromSaved(item: any): void {\n    this.cartService.addToCart(item.product, item.quantity);\n    this.removeFromSaved(item.product.id);\n    this.cartItems = this.cartService.getCart();\n    this.updateCartSummary();\n  }\n\n  removeFromSaved(productId: number): void {\n    this.savedItems = this.savedItems.filter(item => item.product.id !== productId);\n    this.cartService.updateSavedItems(this.savedItems);\n  }\n\n  openPaymentModal(): void {\n    this.isModalOpen = true;\n  }\n\n  closePaymentModal(): void {\n    this.isModalOpen = false;\n  }\n\n  completePurchase(): void {\n    this.cartItems.forEach(item => {\n      // Assuming the cartService has a method to update the product quantity\n      this.cartService.updateProductQuantity(item.product.id, item.product.initial_quantity - item.quantity);\n    });\n    alert('Compra realizada con éxito!');\n    this.cartService.updateCart([]); // Clear the cart\n    this.closePaymentModal();\n    this.ngOnInit(); // Refresh cart data\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}